<% layout('layouts/boilerplate') %>


<h1 class="heading-1 u-center-text u-margin-top-huge" id="allAds">Kategoria: <%=category.name%></h1>

<main class="main u-margin-top">

    <% if (category.ads.length == 0) { %>
        <p class="no-category-alert">Brak ogłoszeń z tej kategorii</p>
    <% } %>

    <% category.ads.forEach(ad => { %>
    

    <section class="ad">
        <a href="../../ads/<%=ad._id%>">      
            <img src="https://images.unsplash.com/photo-1619441207978-3d326c46e2c9?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=749&q=80" alt="Image" class="ad__image">
        </a>


        <h2 class="heading-2 u-margin-top-small">
            <a href="../../ads/<%=ad._id%>" class="ad__title"><%= ad.title %></a>
        </h2>

        <%  
            const date = new Date(ad.updatedAt) 
            const updatedAt = date.getFullYear()+'-' + (date.getMonth()+1) + '-'+date.getDate() + ' ' + date.getHours() + ':' + (date.getMinutes()<10?'0':'') + date.getMinutes();
        %>
        <p class="ad__creation-date">Utworzono <%=updatedAt%></p>

        <span class="ad__price"><%=ad.price%> zł</span>

    </section>
    <% }); %>
</main>